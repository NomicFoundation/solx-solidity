// RUN: solc --mlir-action=print-init --mmlir --mlir-print-debuginfo %s | FileCheck %s

function slice(uint[] calldata a, uint start, uint end)
    returns (uint[] calldata) {
  return a[start:end];
}

function slice_from_start(uint[] calldata a, uint end)
    returns (uint[] calldata) {
  return a[:end];
}

function slice_to_end(uint[] calldata a, uint start)
    returns (uint[] calldata) {
  return a[start:];
}

function slice_full(uint[] calldata a)
    returns (uint[] calldata) {
  return a[:];
}

function slice_len(uint[] calldata a, uint start, uint end)
    returns (uint) {
  uint[] calldata s = a[start:end];
  return s.length;
}

// NOTE: Assertions have been autogenerated by test/updFileCheckTest.py
// CHECK: #NonPayable = #sol<StateMutability NonPayable>
// CHECK-NEXT: #Osaka = #sol<EvmVersion Osaka>
// CHECK-NEXT: #loc2 = loc({{.*}}:2:15)
// CHECK-NEXT: #loc3 = loc({{.*}}:2:34)
// CHECK-NEXT: #loc4 = loc({{.*}}:2:46)
// CHECK-NEXT: #loc10 = loc({{.*}}:7:26)
// CHECK-NEXT: #loc11 = loc({{.*}}:7:45)
// CHECK-NEXT: #loc16 = loc({{.*}}:12:22)
// CHECK-NEXT: #loc17 = loc({{.*}}:12:41)
// CHECK-NEXT: #loc22 = loc({{.*}}:17:20)
// CHECK-NEXT: #loc26 = loc({{.*}}:22:19)
// CHECK-NEXT: #loc27 = loc({{.*}}:22:38)
// CHECK-NEXT: #loc28 = loc({{.*}}:22:50)
// CHECK-NEXT: module attributes {llvm.data_layout = "E-p:256:256-i256:256:256-S256-a:256:256", llvm.target_triple = "evm-unknown-unknown", sol.evm_version = #Osaka} {
// CHECK-NEXT:   sol.func @slice_19(%arg0: !sol.array<? x ui256, CallData> loc({{.*}}:2:15), %arg1: ui256 loc({{.*}}:2:34), %arg2: ui256 loc({{.*}}:2:46)) -> !sol.array<? x ui256, CallData> attributes {id = 19 : i64, state_mutability = #NonPayable} {
// CHECK-NEXT:     %0 = sol.alloca : !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc2)
// CHECK-NEXT:     sol.store %arg0, %0 : !sol.array<? x ui256, CallData>, !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc2)
// CHECK-NEXT:     %1 = sol.alloca : !sol.ptr<ui256, Stack> loc(#loc3)
// CHECK-NEXT:     sol.store %arg1, %1 : ui256, !sol.ptr<ui256, Stack> loc(#loc3)
// CHECK-NEXT:     %2 = sol.alloca : !sol.ptr<ui256, Stack> loc(#loc4)
// CHECK-NEXT:     sol.store %arg2, %2 : ui256, !sol.ptr<ui256, Stack> loc(#loc4)
// CHECK-NEXT:     %3 = sol.load %0 : !sol.ptr<!sol.array<? x ui256, CallData>, Stack>, !sol.array<? x ui256, CallData> loc(#loc5)
// CHECK-NEXT:     %4 = sol.load %1 : !sol.ptr<ui256, Stack>, ui256 loc(#loc6)
// CHECK-NEXT:     %5 = sol.load %2 : !sol.ptr<ui256, Stack>, ui256 loc(#loc7)
// CHECK-NEXT:     %6 = sol.slice %3[%4 : %5] : !sol.array<? x ui256, CallData>, ui256, ui256 -> !sol.array<? x ui256, CallData> loc(#loc5)
// CHECK-NEXT:     sol.return %6 : !sol.array<? x ui256, CallData> loc(#loc8)
// CHECK-NEXT:   } loc(#loc1)
// CHECK-NEXT:   sol.func @slice_from_start_35(%arg0: !sol.array<? x ui256, CallData> loc({{.*}}:7:26), %arg1: ui256 loc({{.*}}:7:45)) -> !sol.array<? x ui256, CallData> attributes {id = 35 : i64, state_mutability = #NonPayable} {
// CHECK-NEXT:     %0 = sol.alloca : !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc10)
// CHECK-NEXT:     sol.store %arg0, %0 : !sol.array<? x ui256, CallData>, !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc10)
// CHECK-NEXT:     %1 = sol.alloca : !sol.ptr<ui256, Stack> loc(#loc11)
// CHECK-NEXT:     sol.store %arg1, %1 : ui256, !sol.ptr<ui256, Stack> loc(#loc11)
// CHECK-NEXT:     %2 = sol.load %0 : !sol.ptr<!sol.array<? x ui256, CallData>, Stack>, !sol.array<? x ui256, CallData> loc(#loc12)
// CHECK-NEXT:     %c0_ui256 = sol.constant 0 : ui256 loc(#loc12)
// CHECK-NEXT:     %3 = sol.load %1 : !sol.ptr<ui256, Stack>, ui256 loc(#loc13)
// CHECK-NEXT:     %4 = sol.slice %2[%c0_ui256 : %3] : !sol.array<? x ui256, CallData>, ui256, ui256 -> !sol.array<? x ui256, CallData> loc(#loc12)
// CHECK-NEXT:     sol.return %4 : !sol.array<? x ui256, CallData> loc(#loc14)
// CHECK-NEXT:   } loc(#loc9)
// CHECK-NEXT:   sol.func @slice_to_end_51(%arg0: !sol.array<? x ui256, CallData> loc({{.*}}:12:22), %arg1: ui256 loc({{.*}}:12:41)) -> !sol.array<? x ui256, CallData> attributes {id = 51 : i64, state_mutability = #NonPayable} {
// CHECK-NEXT:     %0 = sol.alloca : !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc16)
// CHECK-NEXT:     sol.store %arg0, %0 : !sol.array<? x ui256, CallData>, !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc16)
// CHECK-NEXT:     %1 = sol.alloca : !sol.ptr<ui256, Stack> loc(#loc17)
// CHECK-NEXT:     sol.store %arg1, %1 : ui256, !sol.ptr<ui256, Stack> loc(#loc17)
// CHECK-NEXT:     %2 = sol.load %0 : !sol.ptr<!sol.array<? x ui256, CallData>, Stack>, !sol.array<? x ui256, CallData> loc(#loc18)
// CHECK-NEXT:     %3 = sol.load %1 : !sol.ptr<ui256, Stack>, ui256 loc(#loc19)
// CHECK-NEXT:     %4 = sol.length %2 : !sol.array<? x ui256, CallData> loc(#loc18)
// CHECK-NEXT:     %5 = sol.slice %2[%3 : %4] : !sol.array<? x ui256, CallData>, ui256, ui256 -> !sol.array<? x ui256, CallData> loc(#loc18)
// CHECK-NEXT:     sol.return %5 : !sol.array<? x ui256, CallData> loc(#loc20)
// CHECK-NEXT:   } loc(#loc15)
// CHECK-NEXT:   sol.func @slice_full_64(%arg0: !sol.array<? x ui256, CallData> loc({{.*}}:17:20)) -> !sol.array<? x ui256, CallData> attributes {id = 64 : i64, state_mutability = #NonPayable} {
// CHECK-NEXT:     %0 = sol.alloca : !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc22)
// CHECK-NEXT:     sol.store %arg0, %0 : !sol.array<? x ui256, CallData>, !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc22)
// CHECK-NEXT:     %1 = sol.load %0 : !sol.ptr<!sol.array<? x ui256, CallData>, Stack>, !sol.array<? x ui256, CallData> loc(#loc23)
// CHECK-NEXT:     %c0_ui256 = sol.constant 0 : ui256 loc(#loc23)
// CHECK-NEXT:     %2 = sol.length %1 : !sol.array<? x ui256, CallData> loc(#loc23)
// CHECK-NEXT:     %3 = sol.slice %1[%c0_ui256 : %2] : !sol.array<? x ui256, CallData>, ui256, ui256 -> !sol.array<? x ui256, CallData> loc(#loc23)
// CHECK-NEXT:     sol.return %3 : !sol.array<? x ui256, CallData> loc(#loc24)
// CHECK-NEXT:   } loc(#loc21)
// CHECK-NEXT:   sol.func @slice_len_90(%arg0: !sol.array<? x ui256, CallData> loc({{.*}}:22:19), %arg1: ui256 loc({{.*}}:22:38), %arg2: ui256 loc({{.*}}:22:50)) -> ui256 attributes {id = 90 : i64, state_mutability = #NonPayable} {
// CHECK-NEXT:     %0 = sol.alloca : !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc26)
// CHECK-NEXT:     sol.store %arg0, %0 : !sol.array<? x ui256, CallData>, !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc26)
// CHECK-NEXT:     %1 = sol.alloca : !sol.ptr<ui256, Stack> loc(#loc27)
// CHECK-NEXT:     sol.store %arg1, %1 : ui256, !sol.ptr<ui256, Stack> loc(#loc27)
// CHECK-NEXT:     %2 = sol.alloca : !sol.ptr<ui256, Stack> loc(#loc28)
// CHECK-NEXT:     sol.store %arg2, %2 : ui256, !sol.ptr<ui256, Stack> loc(#loc28)
// CHECK-NEXT:     %3 = sol.load %0 : !sol.ptr<!sol.array<? x ui256, CallData>, Stack>, !sol.array<? x ui256, CallData> loc(#loc29)
// CHECK-NEXT:     %4 = sol.load %1 : !sol.ptr<ui256, Stack>, ui256 loc(#loc30)
// CHECK-NEXT:     %5 = sol.load %2 : !sol.ptr<ui256, Stack>, ui256 loc(#loc31)
// CHECK-NEXT:     %6 = sol.slice %3[%4 : %5] : !sol.array<? x ui256, CallData>, ui256, ui256 -> !sol.array<? x ui256, CallData> loc(#loc29)
// CHECK-NEXT:     %7 = sol.alloca : !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc32)
// CHECK-NEXT:     sol.store %6, %7 : !sol.array<? x ui256, CallData>, !sol.ptr<!sol.array<? x ui256, CallData>, Stack> loc(#loc32)
// CHECK-NEXT:     %8 = sol.load %7 : !sol.ptr<!sol.array<? x ui256, CallData>, Stack>, !sol.array<? x ui256, CallData> loc(#loc33)
// CHECK-NEXT:     %9 = sol.length %8 : !sol.array<? x ui256, CallData> loc(#loc33)
// CHECK-NEXT:     sol.return %9 : ui256 loc(#loc34)
// CHECK-NEXT:   } loc(#loc25)
// CHECK-NEXT: } loc(#loc)
// CHECK-NEXT: #loc = loc(unknown)
// CHECK-NEXT: #loc1 = loc({{.*}}:2:0)
// CHECK-NEXT: #loc5 = loc({{.*}}:4:9)
// CHECK-NEXT: #loc6 = loc({{.*}}:4:11)
// CHECK-NEXT: #loc7 = loc({{.*}}:4:17)
// CHECK-NEXT: #loc8 = loc({{.*}}:4:2)
// CHECK-NEXT: #loc9 = loc({{.*}}:7:0)
// CHECK-NEXT: #loc12 = loc({{.*}}:9:9)
// CHECK-NEXT: #loc13 = loc({{.*}}:9:12)
// CHECK-NEXT: #loc14 = loc({{.*}}:9:2)
// CHECK-NEXT: #loc15 = loc({{.*}}:12:0)
// CHECK-NEXT: #loc18 = loc({{.*}}:14:9)
// CHECK-NEXT: #loc19 = loc({{.*}}:14:11)
// CHECK-NEXT: #loc20 = loc({{.*}}:14:2)
// CHECK-NEXT: #loc21 = loc({{.*}}:17:0)
// CHECK-NEXT: #loc23 = loc({{.*}}:19:9)
// CHECK-NEXT: #loc24 = loc({{.*}}:19:2)
// CHECK-NEXT: #loc25 = loc({{.*}}:22:0)
// CHECK-NEXT: #loc29 = loc({{.*}}:24:22)
// CHECK-NEXT: #loc30 = loc({{.*}}:24:24)
// CHECK-NEXT: #loc31 = loc({{.*}}:24:30)
// CHECK-NEXT: #loc32 = loc({{.*}}:24:2)
// CHECK-NEXT: #loc33 = loc({{.*}}:25:9)
// CHECK-NEXT: #loc34 = loc({{.*}}:25:2)
// CHECK-EMPTY:
