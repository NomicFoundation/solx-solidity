// RUN: sol-opt -convert-sol-to-std=target=evm %s | FileCheck %s

module {
  sol.func @f() {
    sol.return
  }

  sol.func @g() {
    sol.return
  }

  sol.func @if(%cond : i1) {
    sol.if %cond {
      sol.call @f() : () -> ()
      sol.yield
    } else {
      sol.call @g() : () -> ()
      sol.yield
    }

    sol.return
  }
}

// NOTE: Assertions have been autogenerated by test/updFileCheckTest.py
// CHECK: module {
// CHECK-NEXT:   func.func @f() attributes {llvm.linkage = #llvm.linkage<private>, passthrough = ["nofree", "null_pointer_is_valid"]} {
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK-NEXT:   func.func @g() attributes {llvm.linkage = #llvm.linkage<private>, passthrough = ["nofree", "null_pointer_is_valid"]} {
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK-NEXT:   func.func @if(%arg0: i1) attributes {llvm.linkage = #llvm.linkage<private>, passthrough = ["nofree", "null_pointer_is_valid"]} {
// CHECK-NEXT:     cf.cond_br %arg0, ^bb2, ^bb1
// CHECK-NEXT:   ^bb1:  // pred: ^bb0
// CHECK-NEXT:     call @g() : () -> ()
// CHECK-NEXT:     cf.br ^bb3
// CHECK-NEXT:   ^bb2:  // pred: ^bb0
// CHECK-NEXT:     call @f() : () -> ()
// CHECK-NEXT:     cf.br ^bb3
// CHECK-NEXT:   ^bb3:  // 2 preds: ^bb1, ^bb2
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK-NEXT: }
// CHECK-EMPTY:
// CHECK-EMPTY:
